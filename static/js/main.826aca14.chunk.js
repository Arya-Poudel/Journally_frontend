(this.webpackJsonpjournally_frontend=this.webpackJsonpjournally_frontend||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),s=n(21),c=n.n(s),o=(n(27),n(28),n(5)),i=n(6),l=n(0),u=function(){return Object(l.jsxs)("nav",{className:"navbar",children:[Object(l.jsx)(i.b,{to:"/",className:"home-link",children:Object(l.jsx)("h1",{children:"Journally"})}),Object(l.jsxs)("div",{children:[Object(l.jsx)(i.b,{to:"/login",children:Object(l.jsx)("button",{className:"login-btn",children:"Log In"})}),Object(l.jsx)(i.b,{to:"signup",children:Object(l.jsx)("button",{className:"signup-btn",children:"Sign Up"})})]})]})},j=function(){var e=Object(o.f)();return JSON.parse(localStorage.getItem("token"))&&e.push("/privatejournals"),Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"home",children:[Object(l.jsx)(u,{}),Object(l.jsxs)("div",{className:"description",children:[Object(l.jsxs)("div",{className:"introduction",children:[Object(l.jsx)("h2",{children:"An online private diary to record your daily-life, thoughts, dreams and frustrations."}),Object(l.jsx)(i.b,{to:"signup",children:Object(l.jsx)("button",{className:"signup-btn",children:"Create An Account"})})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Advantages of keeping a Journal:"}),Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:"Allows you to self-reflect."}),Object(l.jsx)("li",{children:"Improves your creativity and writing."}),Object(l.jsx)("li",{children:"Helps to set and achieve your goals."}),Object(l.jsx)("li",{children:"Helps increase mindfulness and accountability."}),Object(l.jsx)("li",{children:"Strengthens your self-discipline."})]})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Features of Journally:"}),Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:"All journals are private by default and can only be seen by the creator."}),Object(l.jsx)("li",{children:"Uses encryption so that your journals are always private."}),Object(l.jsx)("li",{children:"You can edit and delete your journals at any time. "}),Object(l.jsx)("li",{children:"You can delete your account at any time."})]})]})]})]})})},p=n(3),d=n.n(p),b=n(8),m=n(4),h=function(){var e=Object(o.f)(),t=Object(a.useState)(""),n=Object(m.a)(t,2),r=n[0],s=n[1];JSON.parse(localStorage.getItem("token"))&&function(){var t=Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://journally-backend.herokuapp.com/user/privatejournals",{mode:"cors",headers:{Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("token")))}});case 3:t.sent.ok?e.push("/privatejournals"):localStorage.removeItem("token"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),s(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()();var c=function(){var t=Object(b.a)(d.a.mark((function t(n){var a,r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),document.getElementById("username").value&&document.getElementById("password").value){t.next=4;break}return s("Please fill up both the fields"),t.abrupt("return");case 4:return a=new FormData(document.getElementById("login_form")),t.prev=5,t.next=8,fetch("https://journally-backend.herokuapp.com/login",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-type":"application/json"},body:JSON.stringify(Object.fromEntries(a))});case 8:return r=t.sent,t.next=11,r.json();case 11:c=t.sent,s(c.message),r.ok&&(localStorage.setItem("token",JSON.stringify(c.token)),e.push("/privatejournals")),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),s(t.t0.message);case 19:case"end":return t.stop()}}),t,null,[[5,16]])})));return function(e){return t.apply(this,arguments)}}();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(u,{}),Object(l.jsxs)("form",{id:"login_form",onSubmit:c,className:"login_form",autoComplete:"off",children:[Object(l.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(l.jsx)("input",{type:"text",id:"username",name:"username"}),Object(l.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(l.jsx)("input",{type:"password",id:"password",name:"password"}),Object(l.jsx)("button",{type:"submit",className:"save-btn",children:"LOGIN"}),Object(l.jsx)("button",{type:"button",className:"cancel-btn",children:Object(l.jsx)(i.b,{className:"link-btn",to:"/",children:"Cancel"})})]}),Object(l.jsx)("p",{className:"message",children:r})]})},f=function(){var e=Object(a.useState)(""),t=Object(m.a)(e,2),n=t[0],r=t[1],s=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),document.getElementById("username").value&&document.getElementById("password").value&&document.getElementById("confirm_password")){e.next=4;break}return r("Please fill up all the fields"),e.abrupt("return");case 4:return n=new FormData(document.getElementById("signup_form")),e.prev=5,e.next=8,fetch("https://journally-backend.herokuapp.com/signup",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-type":"application/json"},body:JSON.stringify(Object.fromEntries(n))});case 8:return a=e.sent,e.next=11,a.json();case 11:s=e.sent,r(s.message),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(u,{}),Object(l.jsxs)("form",{id:"signup_form",onSubmit:s,className:"signup_form",autoComplete:"off",children:[Object(l.jsx)("label",{htmlFor:"username",children:" Username*: "}),Object(l.jsx)("input",{type:"text",id:"username",name:"username"}),Object(l.jsx)("label",{htmlFor:"password",children:"Password*:"}),Object(l.jsx)("input",{type:"password",id:"password",name:"password"}),Object(l.jsx)("label",{htmlFor:"confirm_password",children:"Confirm Password*:"}),Object(l.jsx)("input",{type:"password",id:"confirm_password",name:"confirm_password"}),Object(l.jsx)("button",{type:"submit",className:"save-btn",children:"SIGNUP"}),Object(l.jsx)("button",{type:"button",className:"cancel-btn",children:Object(l.jsx)(i.b,{className:"link-btn",to:"/",children:"Cancel"})})]}),Object(l.jsx)("p",{className:"message",children:n})]})},O=function(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"loggedin-nav",children:[Object(l.jsx)(i.b,{to:"/privatejournals",className:"link-btn",children:Object(l.jsx)("h1",{children:"My entries"})}),Object(l.jsxs)("div",{children:[Object(l.jsx)(i.b,{to:"/privatejournals/create",children:Object(l.jsx)("button",{className:"new-btn",children:"New Entry"})}),Object(l.jsx)(i.b,{to:"/account",children:Object(l.jsx)("button",{className:"account-btn",children:"My Account"})})]})]})})},x=function(){var e=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},t=Object(a.useState)([]),n=Object(m.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)(""),o=Object(m.a)(c,2),u=o[0],j=o[1];return Object(a.useEffect)((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://journally-backend.herokuapp.com/user/privatejournals",{mode:"cors",headers:{Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("token")))}});case 3:return t=e.sent,e.next=6,t.json();case 6:if(n=e.sent,t.ok){e.next=10;break}return j(n.message),e.abrupt("return");case 10:s(n),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),j(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(l.jsxs)(l.Fragment,{children:[!u&&Object(l.jsxs)("div",{children:[Object(l.jsx)(O,{}),r.map((function(t){return Object(l.jsx)(i.b,{className:"link",to:"/privatejournals/".concat(t._id),children:Object(l.jsxs)("div",{className:"journal",children:[Object(l.jsx)("p",{className:"journal-title",children:e(t.title)}),Object(l.jsx)("p",{children:e(t.date.split("T")[0])})]})},t._id)}))]}),u&&Object(l.jsx)("p",{className:"message",children:u})]})},v=n(13),g=function(){var e=Object(o.f)(),t="",n=Object(a.useState)(""),r=Object(m.a)(n,2),s=r[0],c=r[1],i=Object(a.useState)(t),u=Object(m.a)(i,2),j=u[0],p=u[1],h=Object(a.useState)(""),f=Object(m.a)(h,2),x=f[0],g=f[1];Object(a.useEffect)((function(){return p(t)}),[t]),Object(a.useEffect)((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://journally-backend.herokuapp.com/user/",{mode:"cors",headers:{Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("token")))}});case 3:return t=e.sent,e.next=6,t.json();case 6:if(n=e.sent,t.ok){e.next=10;break}return g(n.message),e.abrupt("return");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),g(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var y=function(){var t=Object(b.a)(d.a.mark((function t(n){var a,r,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),(a=document.getElementById("title").value)&&j){t.next=5;break}return c("Please fill up both the fields"),t.abrupt("return");case 5:return t.prev=5,t.next=8,fetch("https://journally-backend.herokuapp.com/user/createjournal",{method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("token"))),Accept:"application/json","Content-type":"application/json"},body:JSON.stringify({title:a,journal:j})});case 8:return r=t.sent,t.next=11,r.json();case 11:s=t.sent,r.ok&&(alert("Saved"),e.push("/privatejournals/".concat(s.journal._id))),c(s.message),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),g(t.t0.message);case 19:case"end":return t.stop()}}),t,null,[[5,16]])})));return function(e){return t.apply(this,arguments)}}();return Object(l.jsxs)(l.Fragment,{children:[!x&&Object(l.jsxs)("div",{children:[Object(l.jsx)(O,{}),Object(l.jsx)("p",{className:"message",children:s}),Object(l.jsxs)("form",{onSubmit:y,className:"new-journal-form",autoComplete:"off",children:[Object(l.jsx)("h2",{children:"New Journal"}),Object(l.jsx)("input",{type:"text",placeholder:"Title",name:"title",id:"title"}),Object(l.jsx)(v.a,{initialValue:t,value:j,onEditorChange:function(e,t){return p(e)},apiKey:"rxu7s9jihhz78zovnx660tl8yno80hjks7cgooi9b97q0u9k",init:{mode:"textareas",force_br_newlines:!1,force_p_newlines:!1,forced_root_block:!1,height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}}),Object(l.jsx)("button",{type:"submit",className:"save-btn",children:"Submit"})]})]}),x&&Object(l.jsx)("p",{className:"message",children:x})]})},y=function(){var e=Object(o.f)(),t=Object(a.useState)(""),n=Object(m.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)(!1),i=Object(m.a)(c,2),u=i[0],j=i[1],p=Object(a.useState)(""),h=Object(m.a)(p,2),f=h[0],x=h[1],v=Object(a.useState)(""),g=Object(m.a)(v,2),y=g[0],k=g[1],w=function(){var t=Object(b.a)(d.a.mark((function t(){var n,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Are you sure you want to delete your account? This is permanent and cannot be undone")){t.next=15;break}return t.prev=2,t.next=5,fetch("https://journally-backend.herokuapp.com/user/account/delete",{method:"DELETE",mode:"cors",headers:{Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("token"))),Accept:"application/json","Content-type":"application/json"}});case 5:return n=t.sent,t.next=8,n.json();case 8:a=t.sent,n.ok?(localStorage.removeItem("token"),e.push("/")):x(a.message),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),k(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(){return t.apply(this,arguments)}}(),N=function(){var t=Object(b.a)(d.a.mark((function t(n){var a,r,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=new FormData(document.getElementById("change_password_form")),t.prev=2,t.next=5,fetch("https://journally-backend.herokuapp.com/user/changepassword",{method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("token"))),Accept:"application/json","Content-type":"application/json"},body:JSON.stringify(Object.fromEntries(a))});case 5:return r=t.sent,t.next=8,r.json();case 8:s=t.sent,r.ok?(alert("Password changed. You have to login again"),localStorage.removeItem("token"),e.push("/login")):x(s.message),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),k(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://journally-backend.herokuapp.com/user",{mode:"cors",headers:{Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("token")))}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,t.ok||k(n.message),s(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),k(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(l.jsxs)(l.Fragment,{children:[!y&&Object(l.jsxs)("div",{children:[Object(l.jsx)(O,{}),Object(l.jsxs)("div",{className:"account",children:[Object(l.jsxs)("h2",{children:["Username: ",r.username]}),Object(l.jsxs)("h3",{children:["Entries: ",r.count]}),Object(l.jsx)("button",{onClick:function(){window.confirm("Are you sure you want to logout?")&&(localStorage.removeItem("token"),e.push("/"))},className:"logout-btn",children:"Logout"}),Object(l.jsx)("button",{type:"button",className:"change-password-btn",onClick:function(){return j(!0)},children:"Change password"}),Object(l.jsx)("button",{type:"button",className:"delete-account-btn",onClick:w,children:"Delete Account"})]}),u&&Object(l.jsxs)("div",{className:"change-password-div",children:[Object(l.jsxs)("form",{id:"change_password_form",onSubmit:N,className:"change-password-form",autoComplete:"off",children:[Object(l.jsx)("label",{htmlFor:"old_password",children:"Old password:"}),Object(l.jsx)("input",{type:"password",id:"old_password",name:"old_password"}),Object(l.jsx)("label",{htmlFor:"new_password",children:"New password:"}),Object(l.jsx)("input",{type:"password",id:"new_password",name:"new_password"}),Object(l.jsx)("label",{htmlFor:"confirm_new_password",children:"Confirm new password:"}),Object(l.jsx)("input",{type:"password",id:"confirm_new_password",name:"confirm_new_password"}),Object(l.jsx)("button",{type:"submit",className:"save-btn",children:"Save password"}),Object(l.jsx)("button",{type:"button",className:"cancel-btn",onClick:function(){j(!1),x("")},children:"Cancel"})]}),Object(l.jsx)("p",{className:"message",children:f})]})]}),y&&Object(l.jsx)("p",{className:"message",children:y})]})},k=function(e){var t=e.blogId,n=Object(o.f)(),r=Object(a.useState)(""),s=Object(m.a)(r,2),c=s[0],i=s[1],u=Object(a.useState)(""),j=Object(m.a)(u,2),p=j[0],h=j[1],f=Object(a.useState)(""),x=Object(m.a)(f,2),g=x[0],y=x[1],k=Object(a.useState)(""),w=Object(m.a)(k,2),N=w[0],S=w[1],_=Object(a.useState)(""),I=Object(m.a)(_,2),E=I[0],A=I[1],C=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},J=function(){var e=Object(b.a)(d.a.mark((function e(){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this journal?")){e.next=16;break}return e.prev=2,e.next=5,fetch("https://journally-backend.herokuapp.com/user/privatejournals/".concat(t,"/delete"),{method:"DELETE",mode:"cors",headers:{Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("token"))),Accept:"application/json","Content-type":"application/json"}});case 5:return a=e.sent,e.next=8,a.json();case 8:r=e.sent,i(r.message),a.ok&&n.push("/privatejournals"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),h(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(b.a)(d.a.mark((function e(n){var a,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),(a=document.getElementById("title").value)&&E){e.next=5;break}return i("Please fill up both the fields"),e.abrupt("return");case 5:return e.prev=5,e.next=8,fetch("https://journally-backend.herokuapp.com/user/updatejournal/".concat(t),{method:"PUT",mode:"cors",headers:{Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("token"))),Accept:"application/json","Content-type":"application/json"},body:JSON.stringify({title:a,journal:E})});case 8:return r=e.sent,e.next=11,r.json();case 11:s=e.sent,r.ok?(alert("Updated"),i("")):i(s.message),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),h(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://journally-backend.herokuapp.com/user/privatejournals/".concat(t),{mode:"cors",headers:{Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("token")))}});case 3:return n=e.sent,e.next=6,n.json();case 6:if(a=e.sent,n.ok){e.next=10;break}return h(a.message),e.abrupt("return");case 10:y(C(a.journal)),S(C(a.title)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),h(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),Object(l.jsxs)(l.Fragment,{children:[p&&Object(l.jsx)("p",{className:"message",children:p}),!p&&Object(l.jsxs)("div",{children:[Object(l.jsx)(O,{}),Object(l.jsx)("p",{className:"message",children:c}),Object(l.jsxs)("form",{onSubmit:B,className:"new-journal-form",autoComplete:"off",children:[Object(l.jsxs)("div",{className:"form_info",children:[Object(l.jsx)("h2",{children:"Edit Journal"}),Object(l.jsx)("button",{type:"button",className:"delete-journal-btn",onClick:J,children:"Delete"})]}),Object(l.jsx)("input",{type:"text",placeholder:"Title",name:"title",id:"title",defaultValue:N}),Object(l.jsx)(v.a,{initialValue:g,value:E,onEditorChange:function(e,t){return A(e)},apiKey:"rxu7s9jihhz78zovnx660tl8yno80hjks7cgooi9b97q0u9k",init:{mode:"textareas",force_br_newlines:!1,force_p_newlines:!1,forced_root_block:!1,height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}}),Object(l.jsx)("button",{type:"submit",className:"save-btn",children:"Save"})]})]})]})};var w=function(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(i.a,{basename:"/",children:Object(l.jsxs)(o.c,{children:[Object(l.jsx)(o.a,{exact:!0,path:"/",component:j}),Object(l.jsx)(o.a,{exact:!0,path:"/login",component:h}),Object(l.jsx)(o.a,{exact:!0,path:"/signup",component:f}),Object(l.jsx)(o.a,{exact:!0,path:"/account",component:y}),Object(l.jsx)(o.a,{exact:!0,path:"/privatejournals",component:x}),Object(l.jsx)(o.a,{exact:!0,path:"/privatejournals/create",component:g}),Object(l.jsx)(o.a,{exact:!0,path:"/privatejournals/:id",render:function(e){return Object(l.jsx)(k,{blogId:e.match.params.id})}})]})})})};c.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(w,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.826aca14.chunk.js.map